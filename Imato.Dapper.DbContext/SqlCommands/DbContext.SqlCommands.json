[
  {
    "name": "IsMasterServer",
    "contextVendor": "mssql",
    "text": "select top 1 @@SERVERNAME from sys.tables"
  },
  {
    "name": "IsMasterServer",
    "contextVendor": "postgres",
    "text": "select instance_name();"
  },
  {
    "name": "IsDbActive",
    "contextVendor": "mssql",
    "text": "declare @status bit = 0; select @status = cast(1 as bit) from sys.databases where name = @name and user_access_desc = 'MULTI_USER' and state_desc = 'ONLINE'; select @status;"
  },
  {
    "name": "IsDbActive",
    "contextVendor": "postgres",
    "text": "select result from (select true as result from pg_database d where d.datname = @name union all select false) t order by 1 desc limit 1;"
  },
  {
    "name": "GetColumns",
    "contextVendor": "postgres",
    "text": "select column_name from table_columns(@tableName) order by 1;"
  },
  {
    "name": "GetColumns",
    "contextVendor": "mssql",
    "text": "select name from sys.columns c where c.object_id = object_id(tableName) and c.is_computed = 0 order by 1;"
  },
  {
    "name": "CreateMigrations",
    "contextVendor": "postgres",
    "text": "create table if not exists db_migrations (id varchar(255) not null primary key, date timestamp not null);"
  },
  {
    "name": "CreateMigrations",
    "contextVendor": "mssql",
    "text": "if object_id('dbo.db_migrations') is null create table dbo.db_migrations (id varchar(255) not null primary key, date datetime not null);"
  }
]